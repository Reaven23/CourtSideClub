<div class="vote-campaigns-container">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="campaigns-header">
          <h1 class="campaigns-title">üó≥Ô∏è <%= t('vote_campaigns.title') %></h1>
          <p class="campaigns-subtitle"><%= t('vote_campaigns.subtitle') %></p>
        </div>
      </div>
    </div>

    <!-- Campagnes en cours -->
    <% if @active_campaigns.any? %>
      <div class="row mb-5">
        <div class="col-12">
          <h2 class="section-title">
            <i class="fas fa-fire me-2"></i>
            <%= t('vote_campaigns.sections.active.title') %>
          </h2>
          <div class="campaigns-grid">
            <% @active_campaigns.each do |campaign| %>
              <div class="campaign-card active">
                <div class="campaign-header">
                  <h3 class="campaign-title"><%= campaign.title %></h3>
                  <span class="campaign-status active">üî• <%= t('vote_campaigns.sections.active.status') %></span>
                </div>
                <p class="campaign-description"><%= truncate(campaign.description, length: 120) %></p>
                <div class="campaign-stats">
                  <div class="stat">
                    <i class="fas fa-users"></i>
                    <span><%= campaign.players.count %> <%= t('vote_campaigns.stats.players') %></span>
                  </div>
                  <div class="stat">
                    <i class="fas fa-vote-yea"></i>
                    <span><%= campaign.vote_count %> <%= t('vote_campaigns.stats.votes') %></span>
                  </div>
                  <div class="stat">
                    <i class="fas fa-clock"></i>
                    <span><%= t('vote_campaigns.sections.active.until') %> <%= campaign.end_date.strftime("%d/%m/%Y") %></span>
                  </div>
                </div>
                <div class="campaign-actions">
                  <%= link_to t('vote_campaigns.sections.active.action'), campaign, class: "button-hero-link" %>
                  <% if user_signed_in? && campaign.user_voted?(current_user) %>
                    <span class="voted-badge">‚úÖ <%= t('vote_campaigns.sections.active.voted') %></span>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>

    <!-- Campagnes √† venir -->
    <% if @upcoming_campaigns.any? %>
      <div class="row mb-5">
        <div class="col-12">
          <h2 class="section-title">
            <i class="fas fa-calendar-alt me-2"></i>
            <%= t('vote_campaigns.sections.upcoming.title') %>
          </h2>
          <div class="campaigns-grid">
            <% @upcoming_campaigns.each do |campaign| %>
              <div class="campaign-card upcoming">
                <div class="campaign-header">
                  <h3 class="campaign-title"><%= campaign.title %></h3>
                  <span class="campaign-status upcoming">üü° <%= t('vote_campaigns.sections.upcoming.status') %></span>
                </div>
                <p class="campaign-description"><%= truncate(campaign.description, length: 120) %></p>
                <div class="campaign-stats">
                  <div class="stat">
                    <i class="fas fa-users"></i>
                    <span><%= campaign.players.count %> <%= t('vote_campaigns.stats.players') %></span>
                  </div>
                  <div class="stat">
                    <i class="fas fa-calendar-start"></i>
                    <span><%= t('vote_campaigns.sections.upcoming.starts') %> <%= campaign.start_date.strftime("%d/%m/%Y") %></span>
                  </div>
                </div>
                <div class="campaign-actions">
                  <%= link_to t('vote_campaigns.sections.upcoming.action'), campaign, class: "button-hero-link-secondary" %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>

    <!-- Campagnes pass√©es -->
    <% if @past_campaigns.any? %>
      <div class="row">
        <div class="col-12">
          <h2 class="section-title">
            <i class="fas fa-history me-2"></i>
            <%= t('vote_campaigns.sections.past.title') %>
          </h2>
          <div class="campaigns-grid">
            <% @past_campaigns.each do |campaign| %>
              <div class="campaign-card past">
                <div class="campaign-header">
                  <h3 class="campaign-title"><%= campaign.title %></h3>
                  <span class="campaign-status past">üî¥ <%= t('vote_campaigns.sections.past.status') %></span>
                </div>
                <p class="campaign-description"><%= truncate(campaign.description, length: 120) %></p>
                <div class="campaign-stats">
                  <div class="stat">
                    <i class="fas fa-users"></i>
                    <span><%= campaign.players.count %> <%= t('vote_campaigns.stats.players') %></span>
                  </div>
                  <div class="stat">
                    <i class="fas fa-vote-yea"></i>
                    <span><%= campaign.vote_count %> <%= t('vote_campaigns.stats.votes') %></span>
                  </div>
                  <div class="stat">
                    <i class="fas fa-calendar-times"></i>
                    <span><%= t('vote_campaigns.sections.past.ended') %> <%= campaign.end_date.strftime("%d/%m/%Y") %></span>
                  </div>
                </div>
                <div class="campaign-actions">
                  <%= link_to t('vote_campaigns.sections.past.action'), campaign, class: "button-hero-link-secondary" %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>

    <!-- √âtat vide -->
    <% if @active_campaigns.empty? && @upcoming_campaigns.empty? && @past_campaigns.empty? %>
      <div class="row">
        <div class="col-12">
          <div class="empty-state">
            <i class="fas fa-vote-yea"></i>
            <h3><%= t('vote_campaigns.empty_state.title') %></h3>
            <p><%= t('vote_campaigns.empty_state.description') %></p>
            <%= link_to t('vote_campaigns.empty_state.back_to_dashboard'), dashboard_path, class: "button-hero-link-secondary" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
