<div class="dashboard-container">
  <div class="container">
    <!-- Breadcrumb -->
    <div class="breadcrumb">
      <%= link_to root_path, class: "breadcrumb-link" do %>
        <i class="fas fa-home"></i>
        <%= t('dashboard.breadcrumb.home') %>
      <% end %>
      <i class="fas fa-chevron-right"></i>
      <span><%= t('dashboard.breadcrumb.dashboard') %></span>
    </div>

    <!-- Dashboard Grid -->
    <div class="row g-4 mb-4">
      <!-- Header du dashboard - Grande colonne -->
      <div class="col-lg-8 col-md-12">
        <div class="welcome-badge-card h-100">
          <div class="welcome-section">
            <div class="user-profile-header text-center mb-4">
              <div class="user-avatar-large mb-3">
                <% if @user.photo.attached? %>
                  <% if Rails.env.production? %>
                    <%= cl_image_tag @user.photo.key, class: "avatar-img-large", alt: @user.full_name, width: 120, height: 120, crop: :fill, gravity: :face %>
                  <% else %>
                    <%= image_tag @user.photo, class: "avatar-img-large", alt: @user.full_name %>
                  <% end %>
                <% else %>
                  <i class="fas fa-user-circle avatar-icon-large"></i>
                <% end %>
              </div>
              <h1 class="dashboard-title">
                <%= t('dashboard.welcome.greeting', first_name: @user.first_name) %>
              </h1>
              <p class="dashboard-subtitle">
                <%= t('dashboard.welcome.subtitle') %>
              </p>
            </div>
          </div>

          <div class="level-badge">
            <div class="level-info">
              <span class="level-name"><%= @user.current_level_name %></span>
              <span class="level-points"><%= @user.points %> <%= t('dashboard.level.points') %></span>
            </div>
            <% if @next_level %>
              <div class="progress-bar">
                <div class="progress-fill" style="width: <%= @user.progress_to_next_level %>%"></div>
              </div>
              <small class="progress-text">
                <%= t('dashboard.level.progress_text', points: @user.points_to_next_level, level_name: @next_level.name) %>
              </small>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Actions - Colonne droite -->
      <div class="col-lg-4 col-md-12">
        <div class="d-flex flex-column h-100 gap-3">
          <!-- Votes en attente -->
          <% if @has_pending_votes %>
            <%= link_to vote_campaigns_path, class: "vote-status-card pending flex-fill" do %>
              <div class="vote-status-icon">
                <i class="fas fa-exclamation-circle"></i>
              </div>
              <div class="vote-status-content">
                <h4 class="vote-status-title"><%= t('dashboard.votes.pending.title') %></h4>
                <p class="vote-status-text"><%= t('dashboard.votes.pending.description') %></p>
              </div>
              <div class="vote-status-arrow">
                <i class="fas fa-chevron-right"></i>
              </div>
            <% end %>
          <% else %>
            <div class="vote-status-card inactive flex-fill">
              <div class="vote-status-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="vote-status-content">
                <h4 class="vote-status-title"><%= t('dashboard.votes.up_to_date.title') %></h4>
                <p class="vote-status-text"><%= t('dashboard.votes.up_to_date.description') %></p>
              </div>
            </div>
          <% end %>

          <!-- Historique -->
          <%= link_to historique_path, class: "action-content-link flex-fill" do %>
            <div class="action-card-header h-100">
              <div class="action-icon">
                <i class="fas fa-history"></i>
              </div>
              <div class="action-content">
                <h4 class="action-title"><%= t('dashboard.actions.history.title') %></h4>
                <p class="action-subtitle"><%= t('dashboard.actions.history.subtitle') %></p>
              </div>
              <div class="action-arrow">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          <% end %>

          <!-- Gagner des points -->
          <%= link_to "#{advantages_path}#comment-gagner-points", class: "action-content-link flex-fill" do %>
            <div class="action-card-header h-100">
              <div class="action-icon">
                <i class="fas fa-coins"></i>
              </div>
              <div class="action-content">
                <h4 class="action-title"><%= t('dashboard.actions.earn_points.title') %></h4>
                <p class="action-subtitle"><%= t('dashboard.actions.earn_points.subtitle') %></p>
              </div>
              <div class="action-arrow">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          <% end %>

          <!-- RÃ©compenses -->
          <%= link_to "#{advantages_path}#recompenses-exclusives", class: "action-content-link flex-fill" do %>
            <div class="action-card-header h-100">
              <div class="action-icon">
                <i class="fas fa-gift"></i>
              </div>
              <div class="action-content">
                <h4 class="action-title"><%= t('dashboard.actions.rewards.title') %></h4>
                <p class="action-subtitle"><%= t('dashboard.actions.rewards.subtitle') %></p>
              </div>
              <div class="action-arrow">
                <i class="fas fa-chevron-right"></i>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Actions rapides - Pleine largeur -->
    <div class="row">
      <div class="col-12">
        <div class="quick-actions">
          <h2 class="section-title"><%= t('dashboard.quick_actions.title') %></h2>
          <div class="actions-grid">
            <%= link_to vote_campaigns_path, class: "action-card" do %>
              <i class="fas fa-vote-yea"></i>
              <span><%= t('dashboard.quick_actions.vote_community') %></span>
            <% end %>

            <%= link_to edit_user_registration_path, class: "action-card" do %>
              <i class="fas fa-user-edit"></i>
              <span><%= t('dashboard.quick_actions.my_profile') %></span>
            <% end %>

            <%= link_to mini_games_path, class: "action-card" do %>
              <i class="fas fa-gamepad"></i>
              <span><%= t('dashboard.quick_actions.mini_games') %></span>
            <% end %>
          </div>
        </div>
      </div>
    </div>



    <!-- Mes votes -->

  </div>
</div>
