<%= render 'shared/navbar' %>

<div class="dashboard-container">
  <div class="container">
    <div class="row">
      <!-- Header du dashboard -->
      <div class="col-12">
        <div class="dashboard-header">
          <div class="dashboard-left">
            <div class="welcome-badge-card">
              <div class="welcome-section">
                <h1 class="dashboard-title">
                  Salut <%= @user.first_name %> !
                </h1>
                <p class="dashboard-subtitle">
                  Bienvenue sur ton dashboard CourtSideClub
                </p>
              </div>

              <div class="level-badge">
                <div class="level-info">
                  <span class="level-name"><%= @user.current_level_name %></span>
                  <span class="level-points"><%= @user.points %> points</span>
                </div>
                <% if @next_level %>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: <%= @user.progress_to_next_level %>%"></div>
                  </div>
                  <small class="progress-text">
                    <%= @user.points_to_next_level %> points pour <%= @next_level.name %>
                  </small>
                <% end %>
              </div>
            </div>
          </div>

          <div class="dashboard-right">
            <div class="dashboard-stats-column">
              <div class="stat-card-header">
                <div class="stat-icon">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="stat-content">
                  <h3 class="stat-number"><%= @user.points %></h3>
                  <p class="stat-label">Points totaux</p>
                </div>
              </div>

              <div class="stat-card-header">
                <div class="stat-icon">
                  <i class="fas fa-star"></i>
                </div>
                <div class="stat-content">
                  <h3 class="stat-number"><%= @current_level&.number || 1 %></h3>
                  <p class="stat-label">Niveau actuel</p>
                </div>
              </div>

              <div class="stat-card-header">
                <div class="stat-icon">
                  <i class="fas fa-vote-yea"></i>
                </div>
                <div class="stat-content">
                  <h3 class="stat-number"><%= @votes_count %></h3>
                  <p class="stat-label">Votes MVP</p>
                </div>
              </div>
            </div>

            <div class="dashboard-actions-column">
              <div class="action-card-header">
                <div class="action-icon">
                  <i class="fas fa-history"></i>
                </div>
                <div class="action-content">
                  <h4 class="action-title">Historique</h4>
                  <p class="action-subtitle">Mes engagements CourtSide</p>
                </div>
                <div class="action-arrow">
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>

              <div class="action-card-header">
                <div class="action-icon">
                  <i class="fas fa-gift"></i>
                </div>
                <div class="action-content">
                  <h4 class="action-title">R√©compenses</h4>
                  <p class="action-subtitle">Mes avantages disponibles</p>
                </div>
                <div class="action-arrow">
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>

              <div class="action-card-header">
                <div class="action-icon">
                  <i class="fas fa-coins"></i>
                </div>
                <div class="action-content">
                  <h4 class="action-title">Gagner des points</h4>
                  <p class="action-subtitle">S'investir dans la communaut√© CourtSideClub et gagner des points !</p>
                </div>
                <div class="action-arrow">
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- Actions rapides -->
    <div class="row">
      <div class="col-12">
        <div class="quick-actions">
          <h2 class="section-title">Actions rapides</h2>
          <div class="actions-grid">
            <%= link_to root_path, class: "action-card" do %>
              <i class="fas fa-vote-yea"></i>
              <span>Voter MVP</span>
            <% end %>

            <%= link_to edit_user_registration_path, class: "action-card" do %>
              <i class="fas fa-user-edit"></i>
              <span>Mon profil</span>
            <% end %>

            <div class="action-card disabled">
              <i class="fas fa-gamepad"></i>
              <span>Mini-jeux</span>
              <small>Bient√¥t disponible</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Section vote en cours -->
    <div class="row mb-4">
      <div class="col-12">
        <% if @current_vote_campaign %>
          <div class="vote-campaign-alert <%= @user_vote_in_current_campaign ? 'voted' : 'active' %>">
            <div class="vote-alert-icon">
              <% if @user_vote_in_current_campaign %>
                <i class="fas fa-check-circle"></i>
              <% else %>
                <i class="fas fa-fire"></i>
              <% end %>
            </div>
            <div class="vote-alert-content">
              <% if @user_vote_in_current_campaign %>
                <h4>Merci pour votre vote !</h4>
                <p>Vous avez vot√© pour <strong><%= @user_vote_in_current_campaign.player.full_name %></strong> dans "<%= @current_vote_campaign.title %>"</p>
              <% else %>
                <h4>üî• Vote en cours : <%= @current_vote_campaign.title %></h4>
                <p><%= truncate(@current_vote_campaign.description, length: 100) %></p>
              <% end %>
            </div>
            <div class="vote-alert-actions">
              <%= link_to @current_vote_campaign, class: "btn #{ @user_vote_in_current_campaign ? 'btn-outline-success' : 'btn-primary' }" do %>
                <% if @user_vote_in_current_campaign %>
                  <i class="fas fa-eye"></i>
                  Voir les r√©sultats
                <% else %>
                  <i class="fas fa-vote-yea"></i>
                  Voter maintenant
                <% end %>
              <% end %>
            </div>
          </div>
        <% else %>
          <div class="vote-campaign-alert inactive">
            <div class="vote-alert-icon">
              <i class="fas fa-calendar-times"></i>
            </div>
            <div class="vote-alert-content">
              <h4>Aucun vote en cours</h4>
              <p>Il n'y a actuellement aucune campagne de vote active. Revenez bient√¥t !</p>
            </div>
            <div class="vote-alert-actions">
              <%= link_to vote_campaigns_path, class: "btn btn-outline-secondary" do %>
                <i class="fas fa-history"></i>
                Voir l'historique
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Mes votes -->

  </div>
</div>
