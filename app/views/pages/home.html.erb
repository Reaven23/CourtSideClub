<% content_for :title, "Accueil" %>
<% content_for :description, "Découvrez CourtSideClub, la plateforme qui donne le pouvoir aux fans de basket. Votez pour vos joueurs favoris, gagnez des points, débloquez des récompenses exclusives et participez à la communauté." %>

<section class="hero-section">
  <div class="container">
    <div class="row align-items-center">
      <!-- Hero Section - Left on desktop, top on mobile -->
      <div class="col-lg-6 col-12">
        <div class="hero-section">
          <p id="hero-intro">By hoopers for hoopers</p>
          <h1 class="hero-title">Donnons le pouvoir aux fans</h1>
          <h1 class="hero-title">de <span class="hero-title-highlight">Basketball</span>.</h1>
          <p class="intro-text">Rejoignez CourtSideClub et impacter le monde du basket 3X3. Libérez votre potentiel et embarquez dans une aventure épique à la conquête du basket 3X3, où nous aspirons à devenir les Mark Cuban 3.0 ! Notre vision: lancer une équipe pro de basket 3X3 pour atteindre le FIBA World Tour, tout en permettant aux membres de CourtSideClub de manager la team et les joueurs. Rendons accessible à tous le sport de haut niveau.</p>
          <div class="button-hero">
            <%= link_to "Rejoindre", new_user_registration_path, class: "button-hero-link" %>
            <%= link_to "Déjà membre ?", new_user_session_path, class: "button-hero-link-secondary" %>
          </div>
        </div>
      </div>

      <!-- YouTube Section - Right on desktop, bottom on mobile -->
      <div class="col-lg-6 col-12">
        <div class="youtube-section">
          <div class="youtube-container">
            <p class="youtube-description">Plongez dans l'univers CourtSideClub et découvrez notre vision du basket 3X3</p>
            <div class="video-wrapper">
              <iframe
                width="100%"
                height="315"
                src="https://www.youtube.com/embed/NRyKucBw7DA"
                title="CourtSideClub - By hoopers for hoopers"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen>
              </iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="news-section home-news-section text-center">
  <h1 class="mb-5">Nos dernières actualités</h1>
  <div class="container">
    <div id="newsCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <!-- Desktop: 4 articles per slide, Tablet: 2 articles per slide, Mobile: 1 article per slide -->
        <% @latest_articles.in_groups_of(4, false).each_with_index do |group, index| %>
          <div class="carousel-item <%= 'active' if index == 0 %>">
            <div class="row g-3">
              <% group.each do |article| %>
                <div class="col-12 col-sm-6 col-lg-3">
                  <div class="article-card h-100">
                    <!-- Image -->
                    <%= link_to article, class: "text-decoration-none" do %>
                    <div class="article-card-image">
                                              <% if article.photo.attached? %>
                          <% if Rails.env.production? %>
                            <%= cl_image_tag article.photo.key, class: "card-img-top", alt: article.title, width: 400, height: 250, crop: :fill, gravity: :auto %>
                          <% else %>
                            <%= image_tag article.photo, class: "card-img-top", alt: article.title %>
                          <% end %>
                      <% elsif article.youtube_embed.present? %>
                        <div class="video-thumbnail">
                          <i class="fab fa-youtube"></i>
                          <span>Vidéo</span>
                        </div>
                      <% elsif article.instagram_embed.present? %>
                        <div class="video-thumbnail">
                          <i class="fab fa-instagram"></i>
                          <span>Instagram</span>
                        </div>
                      <% else %>
                        <div class="default-thumbnail">
                          <i class="fas fa-newspaper"></i>
                          <span>Article</span>
                        </div>
                      <% end %>
                    </div>

                    <!-- Content -->
                    <div class="card-body d-flex flex-column">
                      <!-- Tags -->
                      <% if article.tags.any? %>
                        <div class="article-tags mb-2">
                          <% article.tags.limit(3).each do |tag| %>
                            <span class="badge tag-badge me-1" style="background-color: <%= tag.color %>;">
                              <%= tag.name %>
                            </span>
                          <% end %>
                          <% if article.tags.count > 3 %>
                            <span class="text-muted small">+<%= article.tags.count - 3 %></span>
                          <% end %>
                        </div>
                      <% end %>

                      <!-- Title -->
                    <h5 class="article-title">
                      <%= link_to article.title, article, class: "text-decoration-none article-title-link" %>
                    </h5>

                      <!-- Excerpt -->
                      <p class="card-text text-muted small flex-grow-1">
                        <%= truncate(strip_tags(article.content), length: 120) %>
                      </p>

                      <!-- Meta -->
                      <div class="article-meta mt-auto">
                        <div class="d-flex justify-content-between align-items-center">
                          <div class="author-info">
                            <small class="text-muted">
                              <i class="fas fa-user me-1"></i>
                              <strong>CourtSideClub</strong>
                            </small>
                          </div>
                          <div class="date-info">
                            <small class="text-muted">
                              <i class="fas fa-calendar me-1"></i>
                              <%= article.published_at.strftime('%d/%m/%Y') %>
                            </small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>

      <!-- Carousel Controls -->
      <% if @latest_articles.count > 4 %>
        <button class="carousel-control-prev" type="button" data-bs-target="#newsCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Précédent</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#newsCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Suivant</span>
        </button>

        <!-- Carousel Indicators -->
        <div class="carousel-indicators">
          <% (@latest_articles.count / 4.0).ceil.times do |index| %>
            <button type="button" data-bs-target="#newsCarousel" data-bs-slide-to="<%= index %>"
                    class="<%= 'active' if index == 0 %>" aria-current="<%= index == 0 ? 'true' : 'false' %>"
                    aria-label="Slide <%= index + 1 %>"></button>
          <% end %>
        </div>
      <% end %>
    </div>

    <%= link_to articles_path, class: "advantages-button" do %>
      Toutes les actualités <i class="fas fa-arrow-right"></i>
    <% end %>
  </div>
</section>

<section class="second-section">
  <%= link_to discover_path, class: "discover-link" do %>
    <div class="discover-courtsideclub">
      Découvrez <br> CourtSideClub
    </div>
    <div class="discover-text">
      Chez CourtSideClub, nous visons à vous donner le pouvoir afin de participer activement à la gestion d'une équipe de basket 3X3 de niveau international! Nous voulons placer les fans au cœur de l'action et réinventer le concept des socios!
    </div>
  <% end %>

  <div class="line-image">
    <div class="banner-container">
      <%= image_tag "background_courtside.jpg", alt: "CourtSide Basketball Court", class: "courtside-banner-image" %>
      <div class="banner-overlay"></div>
    </div>
  </div>
</section>

<section class="advantages-section">
  <h1><span class="hero-title-highlight">Les avantages pour les membres </span>de CourtSideClub</h1>
  <div class="advantages-card-container">
    <%= link_to  advantages_path, class: "advantages-card" do %>
      <div class="icon">
        <i class="fas fa-crown"></i>
      </div>
      <h2>Deviens le boss d'une équipe de basket 3X3</h2>
      <p>Les adhérents du CourtSideClub auront la possibilité d'influencer la gestion de notre équipe 3X3, grâce à leur droit de vote.</p>
      <div class="icon-bis">
        <i class="fas fa-arrow-right"></i>
      </div>
    <% end %>

    <%= link_to advantages_path, class: "advantages-card" do %>
      <div class="icon">
        <i class="fas fa-ticket-alt"></i>
      </div>
      <h2>Gagne tes places pour des matchs</h2>
      <p>Des billets pour les matchs de vos équipes préférées seront offerts tout au long de l'année aux membres.</p>
      <div class="icon-bis">
        <i class="fas fa-arrow-right"></i>
      </div>
    <% end %>

    <%= link_to advantages_path, class: "advantages-card" do %>
      <div class="icon">
        <i class="fas fa-handshake"></i>
      </div>
      <h2>Rencontres privilégiées</h2>
      <p>Les membres du CourtSideClub bénéficieront d'occasions uniques de rencontrer des joueurs professionnels et d'échanger avec eux après les matchs ou lors de visioconférences.</p>
      <div class="icon-bis">
        <i class="fas fa-arrow-right"></i>
      </div>
    <% end %>

    <%= link_to advantages_path, class: "advantages-card" do %>
      <div class="icon">
        <i class="fas fa-basketball-ball"></i>
      </div>
      <h2>Bénéficie de conseils de pros</h2>
      <p>Accède à des conseils exclusifs de joueurs professionnels et d'entraîneurs expérimentés pour perfectionner ton jeu et atteindre tes objectifs sur le terrain.</p>
      <div class="icon-bis">
        <i class="fas fa-arrow-right"></i>
      </div>
    <% end %>
  </div>
  <%= link_to advantages_path, class: "advantages-button" do %>
    Découvrir les avantages <i class="fas fa-arrow-right"></i>
  <% end %>
</section>
