<%= render 'shared/navbar' %>
<div class="container py-3">
  <h1 class="h4 mb-3">Nouvelle question — <%= @quiz_game.title %></h1>
  <%= simple_form_for [:admin, @quiz_game, @question] do |f| %>
    <%= f.input :content, as: :text, label: 'Contenu de la question', input_html: { rows: 3 } %>
    <!-- order calculé côté contrôleur -->

    <div class="mt-3">
      <label class="form-label">Réponses (4)</label>
      <div class="list-group">
        <%= f.simple_fields_for :answers do |af| %>
          <div class="list-group-item">
            <div class="row g-2 align-items-center">
              <div class="col-auto">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="question[correct_index]" value="<%= af.index %>" id="correct_<%= af.index %>">
                  <label class="form-check-label" for="correct_<%= af.index %>">Bonne</label>
                </div>
              </div>
              <div class="col">
                <%= af.input :content, label: false, placeholder: "Réponse ##{af.index + 1}" %>
              </div>
              <%= af.input :order, as: :hidden, input_html: { value: af.index + 1 } %>
            </div>
          </div>
        <% end %>
      </div>
      <div class="form-text">Cochez la réponse correcte.</div>
    </div>

    <div class="mt-3 d-flex gap-2">
      <%= f.button :submit, 'Créer', class: 'btn btn-primary' %>
      <%= link_to 'Annuler', admin_quiz_game_questions_path(@quiz_game), class: 'btn btn-outline-secondary' %>
    </div>
  <% end %>
</div>
