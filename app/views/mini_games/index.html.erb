<div class="mini-games-container">

  <div class="mini-games-header">
    <div class="container">
      <div class="breadcrumb">
        <%= link_to t('mini_games.breadcrumb.dashboard'), dashboard_path, class: "breadcrumb-link" %>
        <i class="fas fa-chevron-right"></i>
        <span><%= t('mini_games.breadcrumb.mini_games') %></span>
      </div>

      <div class="mini-games-title-section">
        <h1 class="mini-games-title"><%= t('mini_games.hero.title') %></h1>
        <p class="mini-games-subtitle">
          <%= t('mini_games.hero.subtitle') %>
        </p>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="mini-games-content">
      <!-- Section QuizGames -->
      <div class="games-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="fas fa-question-circle"></i>
            <%= t('mini_games.quiz_section.title') %>
          </h2>
          <p class="section-subtitle">
            <%= t('mini_games.quiz_section.subtitle', count: @quiz_games.count) %>
          </p>
        </div>

        <% if @quiz_games.any? %>
          <div class="games-grid">
            <% @quiz_games.each do |quiz_game| %>
              <% user_completed = @user_completed_games.find { |ug| ug.quiz_game_id == quiz_game.id } %>

              <div class="game-card <%= 'completed' if user_completed %>">
                <div class="game-card-header">
                  <div class="game-icon">
                    <i class="fas fa-brain"></i>
                  </div>
                  <% if user_completed %>
                    <div class="completed-badge">
                      <i class="fas fa-check"></i>
                      <%= t('mini_games.quiz_section.actions.completed_badge') %>
                    </div>
                  <% end %>
                </div>

                <div class="game-card-content">
                  <h3 class="game-title"><%= quiz_game.title %></h3>
                  <p class="game-description"><%= quiz_game.description %></p>

                  <div class="game-stats">
                    <div class="stat">
                      <i class="fas fa-question"></i>
                      <span><%= pluralize(quiz_game.questions.count, t('mini_games.quiz_section.stats.questions'), t('mini_games.quiz_section.stats.questions_plural')) %></span>
                    </div>
                    <div class="stat">
                      <i class="fas fa-trophy"></i>
                      <span><%= quiz_game.points_per_question * quiz_game.questions.count %> <%= t('mini_games.quiz_section.stats.max_points') %></span>
                    </div>
                    <% if user_completed %>
                      <div class="stat">
                        <i class="fas fa-star"></i>
                        <span><%= t('mini_games.quiz_section.stats.points_earned', score: user_completed.score, max: quiz_game.points_per_question * quiz_game.questions.count) %></span>
                      </div>
                    <% end %>
                  </div>
                </div>

                <div class="game-card-actions">
                  <% if user_completed %>
                    <button class="btn-game completed" disabled>
                      <i class="fas fa-check"></i>
                      <%= t('mini_games.quiz_section.actions.completed') %>
                    </button>
                    <small class="replay-text">
                      <%= t('mini_games.quiz_section.stats.points_earned', score: user_completed.score, max: quiz_game.points_per_question * quiz_game.questions.count) %>

                    </small>
                  <% else %>
                    <%= link_to quiz_game_path(quiz_game), class: "btn-game play" do %>
                      <i class="fas fa-play"></i>
                      <%= t('mini_games.quiz_section.actions.play_now') %>
                    <% end %>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class="empty-state">
            <div class="empty-icon">
              <i class="fas fa-gamepad"></i>
            </div>
            <h3><%= t('mini_games.quiz_section.empty_state.title') %></h3>
            <p><%= t('mini_games.quiz_section.empty_state.description') %></p>
          </div>
        <% end %>
      </div>

      <!-- Section Future Games -->
      <div class="games-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="fas fa-rocket"></i>
            <%= t('mini_games.coming_soon.title') %>
          </h2>
          <p class="section-subtitle">
            <%= t('mini_games.coming_soon.subtitle') %>
          </p>
        </div>

        <div class="coming-soon-grid">
          <div class="coming-soon-card">
            <div class="coming-soon-icon">
              <i class="fas fa-puzzle-piece"></i>
            </div>
            <h4><%= t('mini_games.coming_soon.games.puzzle.title') %></h4>
            <p><%= t('mini_games.coming_soon.games.puzzle.description') %></p>
            <span class="coming-soon-badge"><%= t('mini_games.coming_soon.badge') %></span>
          </div>

          <div class="coming-soon-card">
            <div class="coming-soon-icon">
              <i class="fas fa-stopwatch"></i>
            </div>
            <h4><%= t('mini_games.coming_soon.games.quiz_chrono.title') %></h4>
            <p><%= t('mini_games.coming_soon.games.quiz_chrono.description') %></p>
            <span class="coming-soon-badge"><%= t('mini_games.coming_soon.badge') %></span>
          </div>

          <div class="coming-soon-card">
            <div class="coming-soon-icon">
              <i class="fas fa-basketball-ball"></i>
            </div>
            <h4><%= t('mini_games.coming_soon.games.shoot_challenge.title') %></h4>
            <p><%= t('mini_games.coming_soon.games.shoot_challenge.description') %></p>
            <span class="coming-soon-badge"><%= t('mini_games.coming_soon.badge') %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
